!function(){"use strict";angular.module("myApp",[])}(),function(){"use strict";angular.module("myApp").factory("demographic",function(){return{cities:["eilat","ashdod","ashkelon","beer sheva","beit shean","zichron yaakov","hadera","haifa","tveria","jerusalem","lod","metula","naharia","natzrat","netanya","sdom","ein gedi","afula","arad","petach tikva","tzfat","rehovot","ramla","tel aviv"],streets:["Arlozorov","Weizmann","Nordow","Katzanelson","Namir"]}})}(),function(){"use strict";angular.module("myApp").factory("features",function(){return["air condition","parking","elevator","mamad","furnished","running water"]})}(),function(){"use strict";angular.module("myApp").factory("filterStore",function(){var a=this;return{rangeCompare:function(a,b){return a>=b.from&&a<=b.to},filterBase:function(){return a.filterBase},filterRanges:function(){return a.filterRanges},reset:function(){a.filterBase={},a.filterRanges={};for(var b in a.possibleRangeValues)a.filterRanges[b]={},a.filterRanges[b].from=a.possibleRangeValues[b].min,a.filterRanges[b].to=a.possibleRangeValues[b].max},getPossibleRangeValues:function(){return a.possibleRangeValues},setFilterValues:function(b){a.possibleRangeValues=b}}})}(),function(){"use strict";angular.module("myApp").factory("rentalsFactory",["demographic","features",function(a,b){return[{id:0,city:a.cities[0],street:a.streets[0],rooms:3,price:3e3,features:[b[0],b[1],b[2]]},{id:1,city:a.cities[1],street:a.streets[1],rooms:3,price:4e3,features:[b[2]]},{id:2,city:a.cities[2],street:a.streets[0],rooms:2,price:3e3,features:[b[1],b[2]]},{id:3,city:a.cities[3],street:a.streets[0],rooms:5,price:2500,features:[b[2],b[3],b[4],b[5]]},{id:4,city:a.cities[3],street:a.streets[3],rooms:4,price:3500,features:[b[2],b[3],b[4],b[5]]},{id:5,city:a.cities[2],street:a.streets[1],rooms:7,price:7e3,features:[b[3],b[5]]}]}])}(),function(){"use strict";angular.module("myApp").controller("filterController",["$scope","rentalsFactory","filterStore","$window",function(a,b,c,d){function e(){c.setFilterValues(f())}function f(){var a=[],c=[];return angular.forEach(b,function(b){a.push(b.rooms),c.push(b.price)}),{rooms:{min:d.Math.min.apply(d.Math,a),max:d.Math.max.apply(d.Math,a)},price:{min:d.Math.min.apply(d.Math,c),max:d.Math.max.apply(d.Math,c)}}}function g(){c.reset()}a.$watch(function(){return b.length},e),e(),g(),a.$watch(c.getPossibleRangeValues,function(b){a.filterValues=b},!0),a.filterBase=c.filterBase(),a.filterRanges=c.filterRanges()}])}(),function(){"use strict";angular.module("myApp").controller("mainController",["$scope","rentalsFactory","filterStore","$window","$filter",function(a,b,c,d,e){function f(a){return e("filter")(e("filter")(a,c.filterBase()),c.filterRanges(),c.rangeCompare)}a.matchedRentals=b,a.editMode={on:!1},a.activateEdit=function(){a.editMode.on=!0},a.template_url="partials/appartment.html",a.removeById=function(a){b=d.jQuery.grep(b,function(b){return b.id!==a})},a.$watch(function(){return b},function(){a.matchedRentals=f(b)},!0),a.$watch(function(){return angular.extend({},c.filterBase(),c.filterRanges())},function(c,d){c&&!angular.equals(c,d)&&(a.matchedRentals=f(b))},!0)}])}(),function(){"use strict";angular.module("myApp").controller("newAppartmentController",["$scope","features","rentalsFactory","$window",function(a,b,c,d){a.features=angular.copy(b),a.newEntry={features:[]},a.toggleSelection=function(b){var c=a.newEntry.features.indexOf(b);c>-1?a.newEntry.features.splice(c,1):a.newEntry.features.push(b)},a.close=function(){a.editMode.on=!1},a.addRoom=function(b){var e,f=d.jQuery.map(c,function(a){return a.id});e=d.Math.max.apply(d.Math,f),b.id=e+1,c.push(b),a.newEntry={features:[]},a.close()}}])}(),function(){"use strict";angular.module("myApp").directive("slider",function(){return{restrict:"EA",scope:{min:"@",max:"@",step:"@",type:"@",trigger:"@",orientation:"@",from:"=",to:"=",value:"="},link:function(a,b){function c(b,c){a.$apply(function(){"range"==a.type?(a.from=c.values[0],a.to=c.values[1]):a.value=c.value})}var d=$(b).slider();angular.forEach(["min","max","step","value"],function(b){a.$watch(b,function(a){angular.isNumber(a)||(a=parseFloat(a)),angular.isNumber&&d.slider("option",b,parseFloat(a))})}),a.$watchCollection("[from, to]",function(a){d.slider("option","values",a)}),a.$watch("orientation",function(a){var c=d.slider("option");c.orientation=a||"horizontal",d.slider("destroy"),d=$(b).slider(c)}),a.$watch("trigger",function(a){"change"==a?(d.slider("option","slide",null),d.slider("option","change",c)):(d.slider("option","change",null),d.slider("option","slide",c))}),a.$watch("type",function(a){var e=d.slider("option");switch(e.slide||e.change||(e.slide=c),isNaN(e.step)&&(e.step=1),a){case"from":e.range&&"min"!=e.range&&"max"!=e.range&&e.values&&(e.value=e.values[0]),e.values=null,e.range="max";break;case"to":e.range&&"min"!=e.range&&"max"!=e.range&&e.values&&(e.value=e.values[1]),e.values=null,e.range="min";break;case"range":"max"==e.range?e.values=[e.value,e.max]:"min"==e.range?e.values=[e.min,e.value]:e.range||angular.isArray(e.values)&&2==e.values.length||(e.values=[e.min,e.max]),e.value=null,e.range=!0;break;default:e.range&&"min"!=e.range&&"max"!=e.range&&e.values&&(e.value=e.values[0]),e.values=null,e.range=!1}d.slider("destroy"),d=$(b).slider(e)})}}})}();